<div class="comment-wrapper" style="margin: 10px; border-left: 1px solid black; border-bottom: 1px solid black; padding: 5px;">
    <%= link_to user_path(current_comment.user) do %>
        <%= image_tag current_comment.user.avatar, size: current_comment.user.avatar_thumbnail_size %>
        <%= current_comment.user.username %>
    <% end %>
    <p><%= current_comment.body %></p>
    <p><%= current_comment.created_at.strftime("%B %d, %Y %I:%M:%S%p") %></p>

    <div style="display: flex; align-items: center; gap: 5px;">
        <%= content_tag :div, id: "comment-#{current_comment.id}-like-wrapper", style: "display: flex; align-items: center; gap: 5px;" do %>
            <% if user_comment_likes[current_comment.id] %>
                <%= render partial: "likes/unlike_button", locals: { like: user_comment_likes[current_comment.id] } %>
            <% else %>
                <%= render partial: "likes/like_button", locals: { likeable: current_comment } %>
            <% end %>
            <p><%= current_comment.likes.count %> likes</p>
        <% end %>
        <p>|</p>
        <p><%= current_comment.replies.count %> replies</p>
    </div>
    
    <%= turbo_frame_tag "comment_#{current_comment.id}_new_reply" do %>
        <%= link_to "Reply to #{current_comment.user.username}", new_comment_path(post: current_comment.post, parent_id: current_comment.id) %>
    <% end %>

    <ul style="gap: 5px">
        <%= content_tag :div, id: "replies_#{current_comment.id}" do %>
            <% current_comment.replies.each do |reply| %>
                <li><%= render partial: "comments/comment", locals: { current_comment: reply, user_comment_likes: user_comment_likes } %></li>
            <% end %>
        <% end %>
    </ul>
</div>